$id: https://saulo.engineer/contributes/marko-js/schemas/models/tag
$schema: https://json-schema.org/draft/2019-09/schema

title: Tag
description: >-
  The only difference between a top-level tag and a nested tag is in the
  `attributeGroups` property.

  While a top-level tag (or a Marko library) creates attribute groups, nested tags only use those attributes.

type: object
anyOf:
  - title: Tag Definition (camelCased)
    type: object
    unevaluatedProperties: false
    $ref: "#/$defs/camelCased"

  - title: Tag Definition (dash-cased)
    type: object
    unevaluatedProperties: false
    $ref: "#/$defs/dash-cased"

$defs:
  camelCased:
    title: Tag Definition (camelCased)
    type: object

    allOf:
      - title: "object :: Tag (camelCased)"
        type: object

      - $ref: ../models/tag.base.yaml#/$defs/camelCased
        type: object

      - type: object
        properties:
          nestedTags:
            type: object
            description: Describes nested tags within this tag. Each nested tag can have its
              own attributes and configuration.
            $ref: ../utils/maps.yaml#/tag-map
          
          attributeGroups:
            type: object
            description: Defines groups of attributes that can then be referenced from tag
              definitions.
            patternProperties:
              .*:
                $ref: ../utils/maps.yaml#/attribute-map
                type: object
        

  dash-cased:
    title: Tag Definition (dash-cased)
    type: object
    
    properties:
      nested-tags:
        type: object
        description: Describes nested tags within this tag. Each nested tag can have its
          own attributes and configuration.
        $ref: ../utils/maps.yaml#/tag-map

      attribute-groups:
        type: object
        description: Defines groups of attributes that can then be referenced from tag
          definitions.
        patternProperties:
          .*:
            $ref: ../utils/maps.yaml#/attribute-map

    allOf:
      - title: "object :: Tag (dash-cased)"
        type: object

      - $ref: ../models/tag.base.yaml#/$defs/dash-cased
        type: object
